#!/usr/bin/env doomscript


(defcli! export-notes (&args projects)
 (require 'doom-start)          ; load your user config

(setq org-publish-project-alist
      '(
        ("org-inner"
         :base-directory "/root/study/notes/inner/markdown_submodule"
         :base-extension "org"
         :recursive t
         :publishing-function org-html-publish-to-html
         :publishing-directory "/root/org_publish/inner"
         )
        ("org-outer"
         :base-directory "/root/study/notes/outer/markdown_submodule"
         :base-extension "org"
         :recursive t
         :publishing-function org-html-publish-to-html
         :publishing-directory "/root/org_publish/outer"
         )
        ))

(org-mode)
  (dolist (project projects)           ; supports multiple projects, if you want
   (org-publish-project project)
  )

 )

  ;  (dolist (file files)           ; supports multiple files, if you want
      ;    (find-file file)             ; open an org file
      ;    (message file)
      ;    (org-publish-current-project)))  ; and export it
      ;   ; (org-html-export-to-html)))  ; and export it

      (run! "export-notes" (cdr (member "--" argv)))
